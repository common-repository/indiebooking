!function(e){e.widget("custom.combobox",{_create:function(){this.wrapper=jQuery("<span>").addClass("custom-combobox").insertAfter(this.element),this.element.hide(),this._createAutocomplete()},_createAutocomplete:function(){var t=jQuery(this.element).children(":selected"),i=!1,o=jQuery(this.element).attr("class"),n=t.val()?t.text():"",s=jQuery(this.element).attr("placeholder");"undefined"!=typeof s&&s!==!1||(s=""),this.input=jQuery("<input>").appendTo(this.wrapper).val(n).attr("title","").attr("placeholder",s).addClass(o+" custom-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left").autocomplete({delay:0,minLength:0,source:e.proxy(this,"_source")}).tooltip({tooltipClass:"ui-state-highlight"}).mousedown(function(){i=jQuery(this).autocomplete("widget").is(":visible")}).click(function(){this.focus(),i||jQuery(this).autocomplete("search",jQuery(this).val())}),this._on(this.input,{autocompleteselect:function(e,t){t.item.option.selected=!0,this._trigger("select",e,{item:t.item.option})},autocompletechange:"_removeIfInvalid"})},_source:function(t,i){var o=new RegExp(e.ui.autocomplete.escapeRegex(t.term),"i");i(this.element.children("option").map(function(){var e=jQuery(this).text();if(this.value&&(!t.term||o.test(e)))return{label:e,value:e,option:this}}))},_removeIfInvalid:function(e,t){if(!t.item){var i=this.input.val(),o=i.toLowerCase(),n=!1;this.element.children("option").each(function(){if(jQuery(this).text().toLowerCase()===o)return this.selected=n=!0,!1}),n||(this.input.val(""),this.element.val(""))}},_destroy:function(){this.wrapper.remove(),this.element.show()}})}(jQuery);