function refreshCalendarEventdata(e,a){e.refreshCalendarEventdata(a)}function myNavFunction(e){}!function(e){function a(e,a,t,r,d){"undefined"!=typeof d&&""!=d||(d=!1),jQuery.each(n,function(n,i){var o=i.getCalendarObj(),s=i.getCalendarGroup();0!=d&&s!=d||1!=o.getSyncDatePicker()||("next"==e?1==i.getIsSecondMonthCalendar()?i.checkRefreshAndDrawTable(a,t,r):1==i.getIsFirstMonthCalendar()&&i.drawFirstMonthCalendar(a,t,r):"prev"==e&&(1==i.getIsFirstMonthCalendar()?i.checkRefreshAndDrawTable(a,t,r):1==i.getIsSecondMonthCalendar()&&i.drawSecondMonthCalendar(a,t,r)))})}function t(e,a){jQuery.each(n,function(t,n){n.setFirstDate(e),n.setLastDate(a),n.refreshFirstLastSelectedBadge()})}jQuery.fn.indiebooking_calendar=function(e){var a=jQuery.extend({},jQuery.fn.indiebooking_calendar_defaults(),e),t=jQuery.fn.indiebooking_calendar_language(a.language);return a=jQuery.extend({},a,t),this.each(function(){var e=new r;e.init(jQuery(this),a),n.push(e)}),n},jQuery.fn.rs_ib_floating_datepicker=function(e){function a(e){var a=e.zabuto_options,t=e.numberOfMonths,r=e.yearless,d=e.yearlessYear,i=jQuery(document.createElement("div"));jQuery(i).attr("id","zabuto_calendar_popup_container"+Math.floor(99999*Math.random()).toString(36)),jQuery(i).addClass("item_kalendar"),jQuery(i).addClass("calender_container"),jQuery(i).addClass("rs_ib_floating_calender_popup_container");var s=[];t>1&&(i.css("min-width","500px"),i.css("max-width","50%"),t=2);for(var l=1;l<=t;l++){var u=jQuery(document.createElement("div"));jQuery(u).addClass("rs_ib_floating_calendar"),jQuery(u).addClass("rs_ib_calendar_data_container"),jQuery(u).data("yearless",r),jQuery(u).data("yearlessYear",d),jQuery(u).data("numberOfMonths",t),t>1&&(1==l?jQuery(u).addClass("rs_ib_floating_calendar_left"):jQuery(u).addClass("rs_ib_floating_calendar_right")),s.push(u),jQuery(i).append(u)}jQuery(o).append(i);var c=0,y="";return jQuery.each(s,function(){var e=jQuery.extend({},a),t=e.action;e.action=function(){t.apply(o);var e=jQuery("#"+this.id);jQuery(e.find("div")).hasClass("notbookable")||jQuery(e.find("div")).hasClass("notavailable")||((jQuery(e.find("div")).hasClass("freedate")||jQuery(e.find("div")).hasClass("dateenable")||jQuery(e.find("div")).hasClass("booked_last_disabled")||jQuery(e.find("div")).hasClass("booked_first_disabled"))&&fillDateFields(this.id),n())},c>0&&(e.month=c++),""!=y&&(e.second_month_calendar=y),r&&(e.year=d);jQuery(this).indiebooking_calendar(e);if(""!=y){var i=jQuery(s[0]),l=jQuery(s[1]);i.data("secondMonthCalendar",jQuery(this).attr("id")),i.data("isFirstMonthCalendar",!0),i.data("isSecondMonthCalendar",!1),l.data("firstMonthCalendar",jQuery(i).attr("id")),l.data("isFirstMonthCalendar",!1),l.data("isSecondMonthCalendar",!0)}c=jQuery(this).data("initMonth"),y=jQuery(this).attr("id"),c++}),i}function t(e){var a=jQuery(".rs_ib_floating_calender_popup_container:visible");a&&jQuery(a).attr("id")!==jQuery(s).attr("id")&&jQuery(a).hide();var t=jQuery(s).closest(".rs_ib_floating_datepicker_container");jQuery(s).find(".rs_ib_calendar_data_container").attr("data-arrivaldays",jQuery(t).attr("data-arrivaldays"));var n=jQuery(t).attr("data-minnaechte");jQuery(s).find(".rs_ib_calendar_data_container").attr("data-minnaechte",n),jQuery(s).data("popupOpenedField",e),"function"==typeof s.data("beforeShow")&&s.data("beforeShow")(e,s),jQuery(s).show(),jQuery(s).position({of:jQuery(e),my:"left top",at:"left bottom"})}function n(){var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0),a=d.offset();if("undefined"!=typeof a){var t=a.left;s.width()+a.left>=e&&(t=e-s.width()-10);var n=s.offset(),r=t-n.left;jQuery(s).animate({left:"+="+r+"px"},"slow")}}var r=jQuery.extend({},jQuery.fn.rs_ib_floating_datepicker_defaults(),e),d=(jQuery(this).find(".rs_ib_floating_datepicker_from"),jQuery(this).find(".rs_ib_floating_datepicker_to")),i=jQuery(this).find(".rs_ib_floating_datepicker"),o=jQuery(this),s=a(r);return s.data("beforeShow",r.beforeShow),s.data("beforeClose",r.beforeClose),s.data("checkOverlapDates",r.checkOverlapDates),s.data("yearless",r.yearless),s.data("yearlessYear",r.yearlessYear),jQuery(i).on("focus",function(){t(jQuery(this))}),jQuery(document).on("click",function(e){jQuery(e.target).closest(".rs_ib_floating_calender_popup_container").length||jQuery(e.target).closest(".calendar-month-navigation").length||jQuery(e.target).hasClass("rs_ib_floating_datepicker")||jQuery(".rs_ib_floating_calender_popup_container").is(":visible")&&jQuery(".rs_ib_floating_calender_popup_container").hide()}),this},jQuery.fn.rs_ib_floating_datepicker_defaults=function(){var e={numberOfMonths:1,beforeShow:!1,beforeClose:!1,checkOverlapDates:!1,yearless:!1,yearlessYear:0};return e};var n=[],r=function(){function e(e){B=e,W.data("firstdate",e)}function n(e){V=e,W.data("lastdate",e)}function r(){return R}function i(){return W.data("isSecondMonthCalendar")}function o(){return W.data("isFirstMonthCalendar")}function s(){return W.data("calendarGroup")}function l(){return W.data("arrivalDays")}function u(e,a){var t="zabuto_calendar_"+Math.floor(99999*Math.random()).toString(36);W=jQuery(e,a),W.attr("id",t),$=t,W.data("initYear",a.year),W.data("initMonth",a.month),W.data("monthLabels",a.month_labels),W.data("weekStartsOn",a.weekstartson),W.data("navIcons",a.nav_icon),W.data("dowLabels",a.dow_labels),W.data("showToday",a.today),W.data("showDays",a.show_days),W.data("showPrevious",a.show_previous),W.data("showNext",a.show_next),W.data("cellBorder",a.cell_border),W.data("jsonData",a.data),W.data("ajaxSettings",a.ajax),W.data("legendList",a.legend),W.data("actionFunction",a.action),W.data("actionNavFunction",a.action_nav),W.data("actionAfterCalendarDraw",a.action_afterdraw),W.data("designEventDay",a.action_design_event_day),W.data("disableOldDays",a.disable_old_days),W.data("maxDate",a.max_date),W.data("enableAllDays",a.enable_all_days),W.data("enableDatePicker",a.enable_date_picker),W.data("syncDatePicker",a.sync_date_picker),W.data("actionRefreshDateData",a.action_refresh_date_data),W.data("isPopupFloatingCalendar",a.is_popup_floating_calendar),W.data("secondMonthCalendar",a.second_month_calendar),W.data("isSecondMonthCalendar",a.is_second_month_calendar),W.data("beforeShow",a.before_show),W.data("isFirstMonthCalendar",!0),W.data("isSecondMonthCalendar",!1),W.data("popupOpenedField",!1),W.data("isSingleFieldCalendar",a.is_single_field_calendar),W.data("startMonth",a.startMonth),W.data("startYear",a.startYear),W.data("calendarGroup",a.calendarGroup),W.data("arrivalDays",a.arrivalDays),W.data("refreshZabuto",function(e){var a,t,n;"undefined"!=typeof e&&""!=e&&R.refreshCalendarEventdata(e),a=W.data("currDate"),t=a.getFullYear(),n=a.getMonth(),jQuery(W).find("table.table").empty(),Q(jQuery(W).find("table.table"),t,n),g()}),W.data("clearCalendar",function(){y()}),W.data("clearMaxRangeNotBookable",function(){c()}),p()}function c(){jQuery(W).find(".maxdaterangenotbookable").removeClass("maxdaterangenotbookable")}function y(){var e=jQuery(W).find(".badge-firstselected");jQuery(e).contents().unwrap();var a=jQuery(W).find(".badge-lastselected");jQuery(a).contents().unwrap(),jQuery(W).find(".zabuto_marked_day").removeClass("zabuto_marked_day"),c(),t("","")}function f(e,a){"undefined"==typeof a&&(a=[]),(jQuery(e).hasClass("notbookable")||jQuery(e).hasClass("bookeddisabled"))&&(jQuery(e).removeClass("arrivalday_green"),jQuery(e).removeClass("bookedenabled"),jQuery(e).removeClass("dateenable"),jQuery(e).parent().removeClass("bookedenabled"),jQuery(e).parent().removeClass("dow-clickable"),jQuery(e).hasClass("booked_first_disabled")&&!jQuery(e).hasClass("booked_last_disabled")?(jQuery(e).removeClass("bookeddisabled"),jQuery(e).parent().removeClass("bookeddisabled"),jQuery(e).parent().addClass("dow-clickable")):jQuery(e).hasClass("booked_last_disabled")&&!jQuery(e).hasClass("booked_first_disabled")?(jQuery(e).removeClass("bookeddisabled"),jQuery(e).parent().removeClass("bookeddisabled"),jQuery(e).parent().addClass("dow-clickable")):jQuery(e).hasClass("bookeddisabled")?jQuery(e).parent().addClass("bookeddisabled"):(jQuery(e).removeClass("booked_last_disabled"),jQuery(e).removeClass("booked_first_disabled"))),jQuery(e).closest(".rs_ib_floating_calender_popup_container").hasClass("rs_ib_ignore_booked_period")&&(jQuery(e).parent().removeClass("bookeddisabled"),jQuery(e).parent().addClass("bookedenabled"),jQuery(e).parent().addClass("dateenable"),jQuery(e).parent().addClass("dow-clickable"),jQuery(e).removeClass("bookeddisabled"),jQuery(e).addClass("dow-clickable"),jQuery(e).addClass("dateenable"))}function b(e,a){if("undefined"==typeof a&&(a=[]),!jQuery(e).hasClass("notbookable")&&!jQuery(e).hasClass("bookeddisabled"))if(jQuery(e).parent().addClass("bookedenabled"),jQuery(e).parent().addClass("dow-clickable"),jQuery(e).addClass("dateenable"),a.length<=0)jQuery(e).addClass("arrivalday"),jQuery(e).addClass("arrivalday_green");else{var t=jQuery(e).data("dayOfWeek");jQuery.inArray(t.toString(),a)>=0&&jQuery(e).addClass("arrivalday")}jQuery(e).hasClass("bookeddisabled")||(jQuery(e).hasClass("bookedenabled")?(jQuery(e).parent().removeClass("notbookable"),jQuery(e).parent().addClass("bookedenabled"),jQuery(e).parent().addClass("dow-clickable")):jQuery(e).hasClass("freedate")?(jQuery(e).parent().removeClass("notbookable"),jQuery(e).parent().addClass("dow-clickable")):jQuery(e).hasClass("notbookable")&&jQuery(e).parent().removeClass("dow-clickable"))}function _(e){var a=R.getMinNaechte(),t=R.getFirstDate(),n=R.getLastDate(),r=W.find(".zabuto_marked_day_mindaterange"),d=jQuery(W).closest(".item_kalender_small");if(d.hasClass("calender_container")&&(d=jQuery(d).closest(".zabuto_date_container").closest(".item_kalender_small")),"popover"==jQuery(d).attr("data-toggle")&&(jQuery(d).popover("hide"),jQuery(d).popover("destroy")),"undefined"==typeof t&&(t=jQuery(W).attr("data-currentvoneng")),"undefined"==typeof n&&(n=jQuery(W).attr("data-currentbiseng")),"undefined"==typeof a)var a=jQuery(W).attr("data-minnaechte");if("undefined"==typeof a&&(a=0),jQuery.each(r,function(){jQuery(this).removeClass("zabuto_marked_day_mindaterange")}),"undefined"!=typeof t&&""!=t){"undefined"!=typeof n&&""!=n&&(n=new Date(n));for(var i=new Date(t),o=new Date(i.getTime()+864e5),s=1;s<a;){var l=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate())),u=l.toISOString();u=u.substring(0,10),e&&"undefined"!=typeof n&&""!=n&&n.toISOString().substring(0,10)==u&&jQuery(d).length>0&&(jQuery(d).popover({placement:"top",trigger:"manual",content:function(){return myContent}}),jQuery(d).data("bs.popover").options.content=rs_ib_global_txt_minnaechte,jQuery(d).popover("show"));var c="#"+R.getId()+"_"+u+"_day";jQuery(c).addClass("zabuto_marked_day_mindaterange"),o=new Date(o.getTime()+864e5),s++}}}function p(){var e,a,t,n,r,d,i,o,s;e=parseInt(W.data("initYear")),a=parseInt(W.data("initMonth"))-1,t=new Date(e,a,1,0,0,0,0),W.data("initDate",t),i=W.data("startMonth"),o=W.data("startYear"),o&&(o=parseInt(o),nextYearSec=o),i&&(i=parseInt(i)-1),o>0&&i>=0?(""!=W.data("secondMonthCalendar")&&(i+=1,12==i&&(o=nextYearSec+1,i=0)),s=new Date(o,i,1,0,0,0,0)):s=t,n=!0===W.data("cellBorder")?" table-bordered":"",$tableObj=jQuery('<table class="table'+n+'"></table>'),$tableObj=Q($tableObj,s.getFullYear(),s.getMonth()),$legendObj=D(W),r=jQuery('<div class="zabuto_calendar" id="'+R.getId()+'_cal"></div>'),r.append($tableObj),r.append($legendObj),W.append(r),d=W.data("jsonData"),!1!==d&&T(t.getFullYear(),t.getMonth()),"function"==typeof W.data("actionAfterCalendarDraw")&&W.data("actionAfterCalendarDraw")(W),1==W.data("enableDatePicker")&&h()}function h(){var e="",a="",t="",n="",r="",d="",i="",o="",s=R.getId();c(),s="#"+s;var l=jQuery(W).find(".badge-firstselected"),u=jQuery(W).find(".badge-lastselected"),y=R.getFirstDate(),f=R.getLastDate(),b=jQuery(W).attr("data-currentvoneng"),p=jQuery(W).attr("data-currentbiseng");if("undefined"!=typeof y&&y!==!1){if(y instanceof Date){var h=y.getMonth();h+=1,h>12?h="01":h<0&&(h="12"),h<10&&(h="0"+h);var g=y.getDate();g<10&&(g="0"+g),y=y.getFullYear()+"-"+h+"-"+g}i=y}else i=b;o="undefined"!=typeof f&&f!==!1?f:p,i!==o&&(""!=i&&(a=s+"_"+i+"_day"),""!=o&&(e=s+"_"+o+"_day"),l.length>0&&(r=l.html(),l.parent("div").html(r)),u.length>0&&(d=u.html(),u.parent("div").html(d)),""!=a&&(t=jQuery(a).html(),jQuery(a).html('<span class="badge badge-firstselected">'+t+"</span>")),""!=e&&(n=jQuery(e).html(),jQuery(e).html('<span class="badge badge-lastselected">'+n+"</span>"))),v(),_(!0),j()}function v(){var e=R.getFirstDate(),a=null,t=0;if("undefined"==typeof e&&(e=jQuery(W).attr("data-currentvoneng")),"undefined"!=typeof e&&""!=e){var n=864e5;e=new Date(e);var r=jQuery(W).attr("data-availableperiods");if("undefined"!=typeof r&&""!=r){var d=JSON.parse(r);console.log(d),jQuery.each(d,function(r,d){jQuery.each(d,function(r,d){var i=new Date(d.from.date),o=new Date(d.to.date);if(i<=e&&o>=e){var s=Math.round(Math.abs((e.getTime()-o.getTime())/n));s>t&&(t=s,a=d)}})})}}if(t>0){var i=new Date(e.getTime()+864e5*(t+1));R.setCurrentMaxDate(i),g()}}function g(){var e=W.data("currDate");e.setDate(1);var a=(e.getMonth(),R.getCurrentMaxDate()),t=a;if(e>a&&(t=e),"undefined"!=typeof t){var n=!0,r=t.getMonth(),d=1;do{var i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),o=i.toISOString();o=o.substring(0,10);var s="#"+R.getId()+"_"+o+"_day",l=jQuery(R).find(s);"undefined"!=typeof l?(jQuery(s).addClass("maxdaterangenotbookable"),t=new Date(t.getTime()+864e5)):n=!1,t.getMonth()!=r&&d++}while(n&&d<=2)}}function j(){var e=R.getFirstDate(),a=R.getLastDate(),t=W.find(".zabuto_marked_day");if("undefined"==typeof e&&(e=jQuery(W).attr("data-currentvoneng")),"undefined"==typeof a&&(a=jQuery(W).attr("data-currentbiseng")),jQuery.each(t,function(){jQuery(this).removeClass("zabuto_marked_day")}),"undefined"!=typeof e&&""!=e&&"undefined"!=typeof a&&""!=a)for(var n=new Date(e),r=new Date(a),d=new Date(n.getTime()+864e5);d.getTime()<r.getTime();){var i=new Date(Date.UTC(d.getFullYear(),d.getMonth(),d.getDate())),o=i.toISOString();o=o.substring(0,10);var s="#"+R.getId()+"_"+o+"_day";jQuery(s).addClass("zabuto_marked_day"),d=new Date(d.getTime()+864e5)}}function Q(e,a,t){var n;return n=new Date(a,t,1,0,0,0,0),W.data("currDate",n),e.empty(),e=C(e,a,t),e=S(e),e=x(e,a,t),T(a,t),"function"==typeof W.data("actionAfterCalendarDraw")&&W.data("actionAfterCalendarDraw")(W),1==W.data("enableDatePicker")&&h(),e}function D(e){var a=jQuery('<div class="legend" id="'+R.getId()+'_legend"></div>'),t=e.data("legendList");return"object"==typeof t&&t.length>0&&jQuery(t).each(function(e,t){if("object"==typeof t&&"type"in t){var n="";switch("label"in t&&(n=t.label),t.type){case"text":if(""!==n){var r="";if("badge"in t){if("undefined"==typeof t.classname)var d="badge-event";else var d=t.classname;r='<span class="badge '+d+'">'+t.badge+"</span> "}a.append('<span class="legend-'+t.type+'">'+r+n+"</span>")}break;case"block":if(""!==n&&(n="<span>"+n+"</span>"),"undefined"==typeof t.classname)var i="event";else var i="event-styled "+t.classname;a.append('<span class="legend-'+t.type+'"><ul class="legend"><li class="'+i+'"></li></u>'+n+"</span>");break;case"list":if("list"in t&&"object"==typeof t.list&&t.list.length>0){var o=jQuery('<ul class="legend"></u>');jQuery(t.list).each(function(e,a){o.append('<li class="'+a+'"></li>')}),a.append(o)}break;case"spacer":a.append('<span class="legend-'+t.type+'"> </span>')}}}),a}function C(e,t,n){var r=W.data("navIcons"),d=jQuery('<span><span class="glyphicon glyphicon-chevron-left"></span></span>'),i=jQuery('<span><span class="glyphicon glyphicon-chevron-right"></span></span>'),o=jQuery(W).data("yearless");"undefined"!=typeof o&&"undefined"!=o||(o=!1),"object"==typeof r&&("prev"in r&&d.html(r.prev),"next"in r&&i.html(r.next));var l=W.data("showPrevious");"number"!=typeof l&&l!==!1||(l=G(W.data("showPrevious"),!0));var u=jQuery('<div class="calendar-month-navigation calendar-month-navigation_prev"></div>');if(u.attr("id",R.getId()+"_nav-prev"),u.data("navigation","prev"),l!==!1){var c=n-1,y=t;c==-1&&(c=11,o||(y-=1)),u.data("to",{year:y,month:c+1}),u.append(d),"function"==typeof W.data("actionNavFunction")&&u.click(W.data("actionNavFunction")),u.click(function(e){var t=u.data("to");W.data("secondMonthCalendar");if(1==R.getSyncDatePicker()){var n=y;a("prev",t,n,c,s())}else k(t,y,c)})}var f=W.data("showNext");"number"!=typeof f&&f!==!1||(f=G(W.data("showNext"),!1));var b=jQuery('<div class="calendar-month-navigation calendar-month-navigation_next"></div>');if(b.attr("id",R.getId()+"_nav-next"),b.data("navigation","next"),f!==!1){var _=n+1,p=t;12==_&&(_=0,o||(p+=1)),b.data("to",{year:p,month:_+1}),b.append(i),"function"==typeof W.data("actionNavFunction")&&b.click(W.data("actionNavFunction")),b.click(function(e){var t=b.data("to");if(1==R.getSyncDatePicker()){var n=p;a("next",t,n,_,s())}else k(t,p,_)})}var h=W.data("monthLabels"),v=jQuery("<th></th>").append(u),g=jQuery("<th></th>").append(b),j="",o=jQuery(W).data("yearless");"undefined"!=typeof o&&"undefined"!=o||(o=!1),j=o?jQuery("<span>"+h[n]+"</span>"):jQuery("<span>"+h[n]+" "+t+"</span>"),j.dblclick(function(){var a=W.data("initDate");if("function"==typeof jQuery(W).data("actionRefreshDateData")){var t={year:a.getFullYear(),month:a.getMonth()+1};W.data("actionRefreshDateData")(W,t)}Q(e,a.getFullYear(),a.getMonth())});var m=jQuery('<th colspan="5"></th>');m.append(j);var D=jQuery('<tr class="calendar-month-header"></tr>');return D.append(v,m,g),e.append(D),e}function k(e,a,t){var n=W;"function"==typeof jQuery(n).data("actionRefreshDateData")&&jQuery(n).data("actionRefreshDateData")(R,e),Q(jQuery(n).find("table"),a,t)}function w(e,a,t){var n=W;if("undefined"!=typeof n&&""!==n){var r=t+1,d=a;if(12==r){var i=jQuery(n).data("yearless");"undefined"!=typeof i&&""!=i&&0!=i||(d+=1),r=0}k(e,d,r)}}function M(e,a,t){var n=W;if("undefined"!=typeof n&&""!==n){var r=0,d=a;if(0==jQuery(n).data("isPopupFloatingCalendar"))r=t;else{var i=jQuery(n).data("numberOfMonths");r="undefined"==typeof i||""==i?t-1:i>1?t-1:t}if(r==-1){var o=jQuery(n).data("yearless");"undefined"!=typeof o&&""!=o&&0!=o||(d-=1),r=11}k(e,d,r)}}function S(e){if(W.data("showDays")===!0){var a=W.data("weekStartsOn"),t=W.data("dowLabels");if(0===a){var n=jQuery.extend([],t),r=new Array(n.pop());t=r.concat(n)}var d=jQuery('<tr class="calendar-dow-header"></tr>');jQuery(t).each(function(e,a){d.append("<th>"+a+"</th>")}),e.append(d)}return e}function F(e){var a=e.match(/(\d+)/g);return a[2]+"-"+a[1]+"-"+a[0]}function x(a,r,d){var i=(W.data("ajaxSettings"),P(r,d)),o=N(r,d),s=J(r,d,1),u=J(r,d,o),c=1,y=new Date,f=jQuery(W).data("yearless");"undefined"!=typeof f&&"undefined"!=f||(f=!1);var p=jQuery(W).attr("data-singleCalendar");"undefined"!=typeof p&&"undefined"!=p||(p=0),f&&1==d&&(o=29);var v=W.data("weekStartsOn");0===v&&(6==u&&i++,6!=s||0!=u&&1!=u&&5!=u||i--,s++,7==s&&(s=0));for(var g=0;g<i;g++){for(var j=jQuery('<tr class="calendar-dow"></tr>'),Q=0;Q<7;Q++){if(Q<s||c>o)j.append("<td></td>");else{var m=J(r,d,c);m=parseInt(m)+1;var D=R.getId()+"_"+L(r,d,c),C=D+"_day",k=jQuery('<div id="'+C+'" class="day" >'+c+"</div>");k.data("day",c),k.data("dayOfWeek",m),W.data("showToday")===!0&&Y(r,d,c)&&k.html('<span class="badge badge-today">'+c+"</span>");var w=jQuery('<td id="'+D+'"></td>');w.append(k),w.data("date",L(r,d,c)),w.data("hasEvent",!1);var M=new Date(r,d,c,23,59,59,59),S=!1;if(1!=W.data("disableOldDays")||f||M.getTime()<y.getTime()&&(w.addClass("old_date"),S=!0),!f){var x=W.data("maxDate");x&&M.getTime()>x.getTime()&&(w.addClass("old_date"),S=!0)}if(0==S&&1==W.data("enableAllDays")&&k.addClass("dateenable"),0==S&&"function"==typeof W.data("actionFunction")){w.addClass("dow-clickable");var O=w.find("div");if(O.length){var T=l();b(O,T)}"function"==typeof W.data("designEventDay")&&O.length&&W.data("designEventDay")(O,!1),w.click(function(){if(W.data("selectedDate",jQuery(this).data("date")),_(!1),1==W.data("enableDatePicker")&&jQuery(this).hasClass("dow-clickable")){var a=null,r=jQuery(this).data("date"),d=new Date(r);if(jQuery(W).hasClass("rs_ib_floating_calendar")){var i=jQuery(W).closest(".rs_ib_floating_calender_popup_container");a=jQuery(i).data("popupOpenedField")}var o=R.getFirstDate(),s=R.getLastDate(),l="";if(f&&(l=jQuery(W).data("yearlessYear")),null!=a){var i,u=null,c=null;i=jQuery(a).hasClass("rs_ib_floating_dashboard_datepicker")?jQuery(a).closest(".rs_ib_floating_dashboard_datepicker_container"):jQuery(a).closest(".rs_ib_floating_datepicker_container"),jQuery(a).hasClass("rs_ib_floating_datepicker_from")?(u=a,c=jQuery(i).find(".rs_ib_floating_datepicker_to")):jQuery(a).hasClass("rs_ib_floating_datepicker_to")&&(c=a,u=jQuery(i).find(".rs_ib_floating_datepicker_from")),u.length>0&&(o=jQuery(u).val(),""!=o&&(f&&(o=o+"."+l),o=F(o))),c.length>0&&(s=jQuery(c).val(),""!=s&&(f&&(s=s+"."+l),s=F(s)))}if("undefined"==typeof o||""==o||1==W.data("isSingleFieldCalendar"))o=r,o instanceof Date&&console.log(o),e(o);else if("undefined"==typeof s||""==s){s=jQuery(this).data("date");var y=new Date(o),b=new Date(s);null!=a?y.getTime()>b.getTime()?(s=o,o=jQuery(this).data("date"),n(s),e(o)):(s=jQuery(this).data("date"),n(s)):y.getTime()>b.getTime()?(s=o,o=jQuery(this).data("date"),n(s),e(o)):(s=jQuery(this).data("date"),n(s))}else{var p=new Date(o),v=new Date(s),r=jQuery(this).data("date"),d=new Date(r);if(null!=a?jQuery(a).hasClass("rs_ib_floating_datepicker_to")?d.getTime()>p.getTime()?s=r:(o=jQuery(this).data("date"),s=""):jQuery(a).hasClass("rs_ib_floating_datepicker_from")&&(o=r,d.getTime()>v.getTime()&&(s="")):d.getTime()>v.getTime()?s=r:(o=jQuery(this).data("date"),s=""),e(o),n(s),jQuery(W).hasClass("rs_ib_floating_calendar_left")||jQuery(W).hasClass("rs_ib_floating_calender_right")){var i=jQuery(W).parent(".rs_ib_floating_calender_popup_container"),g=jQuery(i).find(".rs_ib_floating_calendar");jQuery.each(g,function(){var e="#"+jQuery(this).attr("id"),a=jQuery(e);jQuery(a).data("firstdate",o),jQuery(a).data("lastdate",s)})}}1==R.getSyncDatePicker()?t(o,s):h()}}),w.click(W.data("actionFunction"))}j.append(w),c++}6==Q&&(s=0)}a.append(j)}if(0==p&&5==i){for(var I=jQuery('<tr class="calendar-dow indiebooking_extra_design_row"></tr>'),Q=0;Q<7;Q++)I.append('<td><div class="day">&nbsp;</div></td>');a.append(I)}return a}function O(e,a,t,n){var r=jQuery('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'),d=jQuery('<h4 class="modal-title" id="'+e+'_modal_title">'+a+"</h4>"),i=jQuery('<div class="modal-header"></div>');i.append(r),i.append(d);var o=jQuery('<div class="modal-body" id="'+e+'_modal_body">'+t+"</div>"),s=jQuery('<div class="modal-footer" id="'+e+'_modal_footer"></div>');if("undefined"!=typeof n){var l=jQuery("<div>"+n+"</div>");s.append(l)}var u=jQuery('<div class="modal-content"></div>');u.append(i),u.append(o),u.append(s);var c=jQuery('<div class="modal-dialog"></div>');c.append(u);var y=jQuery('<div class="modal fade" id="'+e+'_modal" tabindex="-1" role="dialog" aria-labelledby="'+e+'_modal_title" aria-hidden="true"></div>');return y.append(c),y.data("dateId",e),y.attr("dateId",e),y}function T(e,a){var t=W.data("jsonData"),n=W.data("ajaxSettings");return W.data("events",!1),!1!==t?I(W):!1===n||A(W,e,a)}function I(e){var a=e.data("jsonData");return e.data("events",a),z(e,"json"),!0}function A(e,a,t){var n=e.data("ajaxSettings");if("object"!=typeof n||"undefined"==typeof n.url)return alert("Invalid calendar event settings"),!1;var r={year:a,month:t+1};return jQuery.ajax({type:"GET",url:n.url,data:r,dataType:"json"}).done(function(a){var t=[];jQuery.each(a,function(e,n){t.push(a[e])}),e.data("events",t),z(e,"ajax")}),!0}function z(e,a){var t=(e.data("jsonData"),e.data("ajaxSettings")),n=e.data("events");n!==!1&&jQuery(n).each(function(n,r){var d=R.getId()+"_"+r.date,i=jQuery("#"+d),o=jQuery("#"+d+"_day");if(i.data("hasEvent",!0),"undefined"!=typeof r.title&&i.attr("title",r.title),"undefined"==typeof r.classname)i.addClass("event");else{if(i.addClass("event-styled"),o.addClass(r.classname),o.length>0){var s=l();f(o,s)}"function"==typeof e.data("designEventDay")&&o.length>0&&e.data("designEventDay")(o,!0)}if("undefined"!=typeof r.badge&&r.badge!==!1){var u=r.badge===!0?"":" badge-"+r.badge,c=o.data("day");o.html('<span class="badge badge-event'+u+'">'+c+"</span>")}if("undefined"!=typeof r.body){var y=!1;if("json"===a&&"undefined"!=typeof r.modal&&r.modal===!0?y=!0:"ajax"===a&&"modal"in t&&t.modal===!0&&(y=!0),y===!0){i.addClass("event-clickable");var b=O(d,r.title,r.body,r.footer);jQuery("body").append(b),jQuery("#"+d).click(function(){jQuery("#"+d+"_modal").modal()})}}})}function Y(e,a,t){var n=new Date,r=new Date(e,a,t);return r.toDateString()==n.toDateString()}function L(e,a,t){return d=t<10?"0"+t:t,m=a+1,m=m<10?"0"+m:m,e+"-"+m+"-"+d}function J(e,a,t){var n=new Date(e,a,t,0,0,0,0),r=n.getDay();return 0==r?r=6:r--,r}function N(e,a){for(var t=28;E(e,a+1,t+1);)t++;return t}function P(e,a){var t=N(e,a),n=J(e,a,1),r=J(e,a,t),d=t,i=n-r;return i>0&&(d+=i),Math.ceil(d/7)}function E(e,a,t){return a>0&&a<13&&e>0&&e<32768&&t>0&&t<=new Date(e,a,0).getDate()}function G(e,a){e===!1&&(e=0);var t,n=W.data("currDate"),r=W.data("initDate");if(t=12*(r.getFullYear()-n.getFullYear()),t-=n.getMonth()+1,t+=r.getMonth(),a===!0){if(t<parseInt(e)-1)return!0}else if(t>=0-parseInt(e))return!0;return!1}var R=this,W=null,$="",B="",V="";return this.getHTMLCalendarObject=function(){return W},this.getCurrentMaxDate=function(){var e=W.data("currentMaxDate");return e},this.setCurrentMaxDate=function(e){W.data("currentMaxDate",e)},this.getFirstDate=function(){var e=W.data("firstdate");if(e instanceof Date){var a=e.toISOString();a=a.substring(0,10),e=a}return e},this.getLastDate=function(){var e=W.data("lastdate");if(e instanceof Date){var a=e.toISOString();a=a.substring(0,10),e=a}return e},this.getMinNaechte=function(){return W.data("minnaechte")},this.getSyncDatePicker=function(){return W.data("syncDatePicker")},this.getId=function(){return $},this.refreshCalendarEventdata=function(e){W.data("jsonData",e)},{init:u,getCalendarObj:r,refreshFirstLastSelectedBadge:h,setFirstDate:e,setLastDate:n,getIsSecondMonthCalendar:i,checkRefreshAndDrawTable:k,getIsFirstMonthCalendar:o,drawFirstMonthCalendar:M,drawSecondMonthCalendar:w,getCalendarGroup:s}};jQuery.fn.indiebooking_calendar_defaults=function(){var e=new Date,a=e.getFullYear(),t=e.getMonth()+1,n={language:!1,year:a,month:t,show_previous:!0,show_next:!0,cell_border:!1,today:!1,show_days:!0,weekstartson:1,nav_icon:!1,data:!1,ajax:!1,legend:!1,action:!1,action_nav:!1,action_afterdraw:!1,action_design_event_day:!1,disable_old_days:!1,max_date:!1,enable_all_days:!1,enable_date_picker:!1,sync_date_picker:!1,is_popup_floating_calendar:!1,second_month_calendar:"",is_second_month_calendar:!1,before_show:!1,is_single_field_calendar:!1,startMonth:!1,startYear:!1,calendarGroup:"",arrivalDays:""};return n},jQuery.fn.indiebooking_calendar_language=function(e){switch("undefined"!=typeof e&&e!==!1||(e="en"),e.toLowerCase()){case"de":return{month_labels:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dow_labels:["Mo","Di","Mi","Do","Fr","Sa","So"]};case"en":return{month_labels:["January","February","March","April","May","June","July","August","September","October","November","December"],dow_labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]};case"ar":return{month_labels:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],dow_labels:["أثنين","ثلاثاء","اربعاء","خميس","جمعه","سبت","أحد"]};case"es":return{month_labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dow_labels:["Lu","Ma","Mi","Ju","Vi","Sá","Do"]};case"fr":return{month_labels:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dow_labels:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"]};case"it":return{month_labels:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dow_labels:["Lun","Mar","Mer","Gio","Ven","Sab","Dom"]};case"nl":return{month_labels:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],dow_labels:["Ma","Di","Wo","Do","Vr","Za","Zo"]};case"pl":return{month_labels:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],dow_labels:["pon.","wt.","śr.","czw.","pt.","sob.","niedz."]};case"pt":return{month_labels:["Janeiro","Fevereiro","Marco","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dow_labels:["S","T","Q","Q","S","S","D"]};case"ru":return{month_labels:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dow_labels:["Пн","Вт","Ср","Чт","Пт","Сб","Вск"]};case"se":return{month_labels:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dow_labels:["Mån","Tis","Ons","Tor","Fre","Lör","Sön"]};case"tr":return{month_labels:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dow_labels:["Pts","Salı","Çar","Per","Cuma","Cts","Paz"]};case"ibwpml":return{month_labels:ibui_local_labels.months,dow_labels:ibui_local_labels.dow}}}}(window);